<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ⭐ BASE HREF dynamique : GitHub Pages vs Local -->
    <script>
        (function() {
            // Détecter si on est sur GitHub Pages (production)
            if (window.location.hostname === 'rodulfo-dmgz.github.io') {
                const base = document.createElement('base');
                base.href = '/rd-gestion/rdgestion-beta/';
                document.head.appendChild(base);
            }
        })();
    </script>
    
    <title>Connexion - RD GESTION</title>
    <link rel="icon" type="image/svg+xml" href="assets/icons/icon.svg">

    <!-- Google Fonts (optionnel mais cohérent avec les autres pages) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS - Point d'entrée unique -->
    <link rel="stylesheet" href="css/main.css">
</head>
<body>

    <!-- Skip link pour accessibilité -->
    <a href="#loginForm" class="skip-link">Aller au formulaire de connexion</a>

    <!-- Page de connexion avec fond dégradé -->
    <div class="login-page-wrapper">
        
        <main class="login-layout">

            <!-- Colonne gauche - Brand -->
            <section class="login-brand-card">
                <div class="login-brand-content">
                    <img src="assets/images/logo.svg" alt="RD GESTION" class="login-brand__logo" />
                    <h1 class="login-brand__name">RD GESTION</h1>
                    <p class="login-brand__slogan">Gérez votre entreprise efficacement</p>
                </div>
            </section>

            <!-- Colonne droite - Formulaire -->
            <section class="login-form-card">
                
                <form id="loginForm" class="login-form">
                    <h2 class="login-form__title">Connexion</h2>

                    <!-- Email -->
                    <div class="form-group">
                        <label for="email" class="form-label form-label--required">
                            Email
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email"
                            class="form-input"
                            placeholder="prenom.nom@rd-gestion.fr" 
                            autocomplete="email"
                            required
                            aria-required="true"
                        >
                    </div>

                    <!-- Mot de passe -->
                    <div class="form-group">
                        <label for="password" class="form-label form-label--required">
                            Mot de passe
                        </label>
                        <input 
                            type="password" 
                            id="password" 
                            name="password"
                            class="form-input"
                            placeholder="••••••••" 
                            autocomplete="current-password"
                            required
                            aria-required="true"
                        >
                    </div>

                    <!-- Message d'erreur -->
                    <p id="error" class="form-error" style="display: none;" role="alert" aria-live="polite"></p>

                    <!-- Bouton de connexion -->
                    <button type="submit" class="btn btn--primary login-submit" id="submitBtn">
                        Accéder au dashboard
                    </button>

                    <!-- Lien mot de passe oublié -->
                    <a href="app/auth/password-reset.html" class="forgot-password-link">
                        Mot de passe oublié ?
                    </a>

                </form>

            </section>

        </main>
        
    </div>

    <!-- 
        Scripts 
        ═══════════════════════════════════════════════════════════════════
        On utilise uniquement des imports ES modules.
        Supabase est importé via ESM (esm.sh) dans supabase.js
    -->
    
    <!-- Script de connexion (module ES6) -->
    <script type="module" src="app/auth/login.js"></script>

</body>
</html>